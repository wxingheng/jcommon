!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).jcommon={})}(this,(function(e){"use strict";const t=function(e,t){for(let n=0,r=t-(e+"").length;n<r;n++)e="0"+e;return e+""},n=function(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`},r=function(e){return n(e,"Undefined")},o=function(e){return n(e,"Null")},i=function(e){return n(e,"Array")},s=function(e){return n(e,"Object")},u=e=>null==e||""===e,a=function(e){if(o(e)||r(e))return"";let t,n=e.constructor===Array?[]:{};if("object"==typeof e){if(JSON)t=JSON.stringify(e),n=JSON.parse(t);else for(const t in e)n[t]="object"==typeof e[t]?a(e[t]):e[t];return n}},c=function(e,t,n){for(const r in t)s(t[r])&&s(e[r])?e[r]=c(e[r],t[r],n):Object.keys(e).includes(r)&&!n.includes(r)||(e[r]=t[r]);for(const n in e)void 0===t[n]&&delete e[n];return e},l=function(e,t=!1){let n=e.replace(/(^\s+)|(\s+$)/g,"");return t&&(n=n.replace(/\s/g,"")),n},d=function(e){const t=a(e);for(const e in t)"object"==typeof t[e]?t[e]=d(t[e]):"string"==typeof t[e]&&(t[e]=l(t[e]));return t},f=function(e,t){t||(t=e.slice(e.lastIndexOf("/")+1));let n=document.createElement("a");n.download=t,n.style.display="none",n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)};e.EventBus=class{constructor(){this.listeners={},this.maxListener=5}addListener(e,t){const n=this.listeners;if(n[e]&&n[e].length>=this.maxListener)throw console.error("监听器的最大数量是%d,您已超出限制",this.maxListener);n[e]instanceof Array?-1===n[e].indexOf(t)&&n[e].push(t):n[e]=[t]}emit(e){const t=Array.prototype.slice.call(arguments);t.shift(),this.listeners[e].forEach(e=>{e.apply(null,t)})}getListeners(e){return this.listeners[e]}setMaxListeners(e){this.maxListener=e}removeListener(e,t){const n=this.listeners,r=(n[e]||[]).indexOf(t);r>=0&&n[e].splice(r,1)}removeAllListener(e){this.listeners[e]=[]}once(e,t){const n=this;this.addListener(e,(function r(){const o=Array.prototype.slice.call(arguments);t.apply(null,o),n.removeListener(e,r)}))}},e.Queue=class{constructor(e){this.items=[],this.items=e||[]}enqueue(e){i(e)?this.items=this.items.concat(e):this.items.push(e)}dequeue(){return this.items.shift()}front(){return this.items[0]}isEmpty(){return 0===this.items.length}size(){return this.items.length}clear(){this.items=[]}print(){console.log(this.items.toString())}},e.addZero=t,e.arrByObj=function(e,t,n=""){if("[object Array]"!==Object.prototype.toString.call(e))return console.error("arrByObj 参数错误，请检查：",e),{};const r={};return e.forEach((function(e){r[e[t]]=n?e[n]:e})),r},e.cleanObject=function(e){if(!e)return{};const t={...e};return Object.keys(t).forEach(e=>{const n=t[e];u(n)&&delete t[e]}),t},e.cloneJson=function(e){return"object"!=typeof e||null==e?e:JSON.parse(JSON.stringify(e))},e.cloneObj=a,e.copyToBoar=function(e){const t=document.createElement("textarea");return document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy")?(document.execCommand("copy"),document.body.removeChild(t),!0):(document.body.removeChild(t),!1)},e.cutNumber=function(e,t=2){return"number"!=typeof e&&(e=Number(e)),Number(e.toFixed(t))},e.dateFormat=function(e,n){return n.replace(/yyyy|YYYY/,e.getFullYear().toString()).replace(/yy|YY/,t(e.getFullYear()%100,2)).replace(/mm|MM/,t(e.getMonth()+1,2)).replace(/m|M/g,(e.getMonth()+1).toString()).replace(/dd|DD/,t(e.getDate(),2)).replace(/d|D/g,e.getDate().toString()).replace(/hh|HH/,t(e.getHours(),2)).replace(/h|H/g,e.getHours().toString()).replace(/ii|II/,t(e.getMinutes(),2)).replace(/i|I/g,e.getMinutes().toString()).replace(/ss|SS/,t(e.getSeconds(),2)).replace(/s|S/g,e.getSeconds().toString()).replace(/w/g,e.getDay().toString()).replace(/W/g,["日","一","二","三","四","五","六"][e.getDay()])},e.dateInterval=function(e,t){let n=[0,0,0,0],r="",o=t>e?parseInt(((t-e)/1e3).toString()):0;return n[0]=o>86400?parseInt((o/86400).toString()):0,o-=86400*n[0],n[1]=o>3600?parseInt((o/3600).toString()):0,o-=3600*n[1],n[2]=o>60?parseInt((o/60).toString()):0,n[3]=o-60*n[2],r=n[0]>0?n[0]+"天":"",r+=n[0]<=0&&n[1]<=0?"":n[1]+"小时",r+=n[0]<=0&&n[1]<=0&&n[2]<=0?"":n[2]+"分钟",r+=n[0]<=0&&n[1]<=0&&n[2]<=0&&n[3]<=0?"":n[3]+"秒",r},e.dateMonthDays=function(e){const t=e?new Date(e):new Date,n=t.getMonth();return t.setMonth(n+1),t.setDate(0),t.getDate()},e.debounce=function(e,t=500,n=!1){let r;return function(){const o=arguments;if(r&&clearTimeout(r),n){const n=!r;r=setTimeout((function(){r=null}),t),n&&e.apply(null,o)}else r=setTimeout((function(){e.apply(null,o)}),t)}},e.doubleRanking=function(e,t){const{sortKey:n,filterRuleKey:r,rule:o,sortOrder:i}={filterRuleKey:"",rule:[],sortKey:"",sortOrder:1,...t};e=e.filter(e=>!o||-1!==o.indexOf(e[r]));const s={};for(let t=0;t<e.length;t++)s.hasOwnProperty(e[t][r])?s[e[t][r]].push(e[t]):s[e[t][r]]=[e[t]];for(const e in s)s[e]=s[e].sort((e,t)=>e[n]>t[n]?1*i:-1*i);let u=[];for(let e=0;e<o.length;e++)s.hasOwnProperty(o[e])&&(u=u.concat(s[o[e]]));return u},e.download=f,e.downloadFile=function(e,t){if(void 0===e)throw new Error("The first parameter name is a must");if(void 0===t)throw new Error("The second parameter content is a must");t instanceof Blob||(t=new Blob([t]));const n=URL.createObjectURL(t);f(n,e)},e.everyTrim=d,e.formatQueryParam=function(e){e=d(e);let t="";if("[object Object]"===Object.prototype.toString.call(e))for(const n in e)Array.isArray(e[n])?e[n].forEach(e=>{t+=`${n}=${e}&`}):null!==e[n]&&(t+=`${n}=${e[n]}&`);return t.length>0?(t="?"+t,t.substring(0,t.length-1)):""},e.getBirthdatByIdNo=function(e){let t="";return 15==e.length?(t=e.substring(6,12),t="19"+t,t=t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6),t):(t=e.substring(6,14),t=t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6),t)},e.getBrowserInfo=function(){let e,t,n,r={name:"other",version:"0"},o=navigator.userAgent.toLowerCase();for(t=[["WeiXin",/micromessenger\/([^\s]+)/],["QQ",/qq\/([^\s]+)/],["QQBrowser",/(?:qqbrowser|qqlivebrowser)\/([^\s]+)/],["JDAPP",/jdapp;/],["QIHU",/qihu|360se/],["LieBao",/(?:lbbrowser|liebaofast)\/?([\d\.]+)?/],["Sogou",/(?:metasr|sogou[\w]*)[ \/]([\d\.]+)/],["Opera",/(?:opera|opr|oupeng)\/([\d\.]+)/],["BaiduBrowser",/(?:bidubrowser|baidubrowser)[\/ ]?([\d\.\w]+)/],["BaiduBox",/baiduboxapp|baiduboxpad/],["UC",/(?:ucweb|ucbrowser)\/?([\d\.]+)/],["Maxthon",/maxthon\/([\d\.]+)/],["Samsung",/samsungbrowser\/([\d\.]+)/],["Dolphin",/aphone|apad/],["2345",/2345/],["Miui",/miuibrowser\/([\d\.]+)/],["OppoBrowser",/oppobrowser\/([\d\.]+)/],["MeiZu",/mz-/],["Weibo",/weibo/],["Youku",/youku/],["NewsApp",/newsapp/],["AliApp",/aliapp/],["Firefox",/firefox\/([\d\.\w]+)/],["Chrome",/chrome\/([\d\.]+)/],["IE",/msie[ ](\d+\.\d+)/],["Safari",/safari\/([\d\.]+)/]],e=0;e<t.length;e++)if(n=o.match(t[e][1])){r.name=t[e][0],r.version=n[1]||"0";break}return r},e.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},e.getCountDays=function(e){const t=new Date(e),n=t.getMonth();return t.setMonth(n+1),t.setDate(0),t.getDate()},e.getExt=function(e){if("string"==typeof e)return e.split(".").pop();throw new Error("filename must be a string type")},e.getFormData=function(e){const t=new FormData;return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach((e,r)=>t.append(n+`[${r}]`,e)):t.append(n,e[n])}),t},e.getSexByIdNO=function(e){return 18==e.length?Number(e.charAt(16))%2==0?"FEMALE":"MALE":15==e.length?Number(e.charAt(14))%2==0?"FEMALE":"MALE":""},e.getStorage=function(e){return window.localStorage.getItem(e)},e.getUrlQuery=function(e){const t=arguments[1]||window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=t.substr(t.indexOf("?")+1).match(n);return null!=r?r[2]:""},e.getV=function(e,...t){return t.length>=2?t.reduce((t,n)=>t&&t.hasOwnProperty(n)?t[n]:e):e},e.hideIdNum=function(e){return`${String(e).slice(0,1)}****************${String(e).slice(17)}`},e.isAndroidMobileDevice=function(){return/android/i.test(navigator.userAgent.toLowerCase())},e.isAppleMobileDevice=function(){return/iphone|ipod|ipad|Macintosh/i.test(navigator.userAgent.toLowerCase())},e.isArray=i,e.isBoolean=function(e){return n(e,"Boolean")},e.isDate=function(e){return n(e,"Date")},e.isEmail=function(e){return/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)},e.isEmptyObject=function(e){if(null==e)return!0;if(Array.isArray(e))return!e.length;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0},e.isError=function(e){return n(e,"Error")},e.isFalsy=function(e){return 0!==e&&!e},e.isFunc=function(e){return n(e,"Function")},e.isNull=o,e.isNumber=function(e){return n(e,"Number")},e.isObject=s,e.isPhone=function(e){if(!e)return!1;return/(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/.test(e)},e.isQQ=function(){return!!/qq\/([\d\.]+)*/i.test(navigator.userAgent)},e.isReg=function(e){return n(e,"RegExp")},e.isString=function(e){return n(e,"String")},e.isSupportStorage=function(){if(!window.localStorage)return!1;try{return window.localStorage.setItem("JUTILS_STOARGE_TEST","true"),window.localStorage.removeItem("JUTILS_STOARGE_TEST"),!0}catch(e){return!1}},e.isType=n,e.isUndefined=r,e.isUserId=function(e){let t,n,r,o,i,s,u,a,c,l;if(i=["1","0","x","9","8","7","6","5","4","3","2"],s=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],t="",!e)return"身份证号码不能为空";if(18!=e.length)return"身份证号码长度应该为18位";if(18==e.length?t=e.substring(0,17):15==e.length&&(t=e.substring(0,6)+"19"+e.substring(6,15)),!/^\d+$/.test(t))return"身份证格式错误";if(n=t.substring(6,10),r=t.substring(10,12),o=t.substring(12,14),!1===/[1-9]\d{3}\-(0[1-9]|1[0-2])\-([0-2]\d|3[0-1])/.test(n+"-"+r+"-"+o))return"身份证生日无效。";if((new Date).getFullYear()-Number(n)>150||(new Date).getTime()-new Date(Number(n),Number(r)-1,Number(o)).getTime()<0)return"身份证生日不在有效范围";if(Number(r)>12||0===Number(r))return"身份证月份无效";if(Number(o)>31||0==Number(o))return"身份证日期无效";if(!{11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"}[t.substring(0,2)])return"身份证地区编码错误";for(a=0,u=0;u<17;u++)a+=Number(t.charAt(u))*Number(s[u]);return c=a%11,l=i[c],t+=l,18!=e.length?"":t!=e.toLowerCase()?"不是合法的身份证号码":""},e.isVoid=u,e.isWX=function(){return!!/MicroMessenger/i.test(navigator.userAgent)},e.mergeObj=c,e.operattelecom=function(e){var t=e||"",n=t.substring(0,3),r=t.substring(0,4);return!!/^1\d{10}$/.test(t)&&("130,131,132,155,156,185,186,145,176".indexOf(n)>=0?"联通":"133,153,180,181,189,177,173,170".indexOf(n)>=0||"1349"==r?"电信":"134,135,136,137,138,139,150,151,152,157,158,159,187,188,147,182,183,184,178".indexOf(n)>=0?"移动":"未知")},e.osInfo=function(e){e=e||navigator.userAgent;let t={os:"other",version:""},n=[["android",/Android;?[\s\/]+([\d.]+)?/],["android",/jdapp;android;[\d.]+;([\d.]+);/],["android",/[aA]ndroid;/],["ipad",/iPad;.*?OS\s([\d_]+)/],["ipod",/iPod(?:\stouch)?;.*?\sOS\s([\d_]+)?/],["iphone",/CPU\siPhone\s(?:OS\s)?([\d_]+)/],["windows",/Windows NT/],["mac",/Macintosh;.*?Mac OS X\s([\d._]+)/],["windows phone",/Windows Phone\s([\d.]+)?/],["symbianos",/SymbianOS\/([\d.]+)?/],["bb",/BlackBerry|BB10|RIM Tablet OS\s([\d.]+)?/],["linux",/linux/i]],r=0;for(;r<n.length;r++){const o=n[r],i=e.match(o[1]);if(i){t.os=o[0],t.version=(i[1]||"").replace(/_/g,".");break}}return t},e.randomData=function(e,t){const n=[];for(let r=0;r<e;r++){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n]+String(Math.random()).substr(15);n.push(e)}return n},e.removeStorage=function(e){window.localStorage.removeItem(e)},e.saveStorage=function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}},e.scopeRandom=function(e,t){return Math.floor(Math.random()*(t-e)+e)},e.sleep=function(e){return new Promise(t=>setTimeout(t,e))},e.throttle=function(e,t=500,n){let r,o,i,s=0;n||(n={leading:!1,trailing:!0});const u=function(){s=!1===n.leading?0:(new Date).getTime(),r=null,e.apply(o,i),r||(o=i=null)};return function(){var a=(new Date).getTime();s||!1!==n.leading||(s=a);var c=t-(a-s);o=null,i=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=a,e.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(u,c))}},e.timeFormat=function(e){var t,n=new Date(e),r=new Date,o=n.getFullYear(),i=n.getMonth()+10,s=n.getDate(),u=n.getHours(),a=n.getMinutes(),c=r.getFullYear(),l=r.getHours();if(o<c)t=o+"年"+i+"月"+s+"日 "+u+":"+a;else{var d=(r.getTime()-n.getTime())/36e5;if(d>l)t=i+"月"+s+"日 "+u+":"+a;else if(d>=1)t="今天 "+u+":"+a+"分";else{var f=r.getMinutes()-a;t=f>1?f+"分钟前":"刚刚"}}return t},e.trim=l,e.uniqueArray=function(e){if(!Array.isArray(e))throw new Error("The first parameter must be an array");return 1==e.length?e:[...new Set(e)]},e.uniqueId=function(){var e=Math.random,t=parseInt;return Number(new Date).toString()+t((10*e()).toString())+t((10*e()).toString())+t((10*e()).toString())},e.urlByObj=function(e){const t={},n=e.match(/[?&][^?&]+=[^?&]+/g);return n&&n.forEach(e=>{const n=e.substring(1).split("="),r=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]);t[r]=o}),t},e.uuid=function(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n="",r=e=e||8;r>0;--r)n+=t[Math.floor(Math.random()*t.length)];return n},e.versionCount=function(e){return String(parseInt(e.replace(/\./g,""))+1).padStart(e.split(".").length,"0").split("").join(".")},Object.defineProperty(e,"__esModule",{value:!0})}));
